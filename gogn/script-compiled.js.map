{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"script-compiled.js","sourcesContent":["/**\r\n * Niðurteljari!\r\n */\r\nclass Countdown {\r\n  /**\r\n   * Finnur container fyrir niðurteljara og form.\r\n   * Bindur submit eventhandler við form.\r\n   */\r\n  constructor() {\r\n    this.keyName = 'countdown';\r\n    this.container = document.querySelector('.countdown');\r\n    this.form = document.querySelector('form');\r\n\r\n    // til þess að submit hafi þennan klasa sem \"this\" verðum við\r\n    // að nota bind hér (og í öðrum föllum sem við bindum!)\r\n    this.form.addEventListener('submit', this.submit.bind(this));\r\n  }\r\n\r\n  /**\r\n   * Sækir gögn úr localStorage eftir this.keyName\r\n   * Ef gögn eru til, hleður þeim inn með því að kalla í this.create()\r\n   */\r\n  load() {\r\n    const saved = window.localStorage.getItem(this.keyName);\r\n\r\n    if (saved) {\r\n      const parsed = JSON.parse(saved);\r\n      this.create(parsed.title, new Date(parsed.date));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Tekur við title sem streng og date sem Date hlut\r\n   * Vistar sem json gögn í localStorage undir this.keyName\r\n   */\r\n  save(title, date) {\r\n    const data = { title, date };\r\n    const json = JSON.stringify(data);\r\n    window.localStorage.setItem(this.keyName, json);\r\n  }\r\n\r\n  /**\r\n   * Handler fyrir submit á formi.\r\n   * Sækir gögn úr formi og kallar í this.parseDate()\r\n   * Vistar gögn með this.save() og sýnir niðurteljara með this.create()\r\n   */\r\n  submit(e) {\r\n    e.preventDefault();\r\n\r\n    const title = this.form.querySelector('input[type=text]');\r\n    const date = this.form.querySelector('input[type=date]');\r\n    const time = this.form.querySelector('input[type=time]');\r\n\r\n    const parsedDate = this.parseDate(date.value, time.value);\r\n    this.save(title.value, parsedDate);\r\n    this.create(title.value, parsedDate);\r\n  }\r\n\r\n  /**\r\n   * Tekur við:\r\n   *  - date sem streng á forminu \"yyyy-mm-dd\", t.d. \"2017-11-06\"\r\n   *  - time sem streng á forminu \"hh:mm\", t.d. \"09:00\"\r\n   * Skilar date hlut með gögnum úr date og time\r\n   */\r\n  parseDate(date, time) {\r\n    return new Date(`${date} ${time}`);\r\n  }\r\n\r\n  /**\r\n   * Býr til element fyrir niðurteljara og bætir við this.container\r\n   * Setur this.date sem dagsetningu sem talið er niður að\r\n   * Setur this.element sem element sem geymir niðurteljara\r\n   * Bætir við \"eyða\" takka sem sér um að eyða niðurteljara með this.delete\r\n   * Byrjar niðurteljara með this.startCounter() og\r\n   * felur form með this.hideForm()\r\n   */\r\n  create(title, date) {\r\n    const titleElement = document.createElement('h2');\r\n    titleElement.setAttribute('class', 'countdown__heading');\r\n    titleElement.appendChild(document.createTextNode(title));\r\n\r\n    this.container.appendChild(titleElement);\r\n\r\n    this.element = document.createElement('div');\r\n\r\n    const countdownContainer = document.createElement('div');\r\n    countdownContainer.setAttribute('class', 'countdown__container');\r\n\r\n    this.element.appendChild(countdownContainer);\r\n\r\n    this.container.appendChild(this.element);\r\n\r\n    this.date = new Date(date);\r\n    const deleteButton = document.createElement('button');\r\n    deleteButton.setAttribute('class', 'button');\r\n    deleteButton.appendChild(document.createTextNode('Eyða'));\r\n\r\n    this.container.appendChild(deleteButton);\r\n\r\n    deleteButton.addEventListener('click', this.delete.bind(this));\r\n\r\n    this.startCounter();\r\n\r\n    this.hideForm();\r\n  }\r\n\r\n  /**\r\n   * Felur form með CSS\r\n   */\r\n  hideForm() {\r\n    this.form.style.display = 'none';\r\n  }\r\n\r\n  /**\r\n   * Sýnir form með CSS\r\n   */\r\n  showForm() {\r\n    this.form.style.display = 'block';\r\n  }\r\n\r\n  /**\r\n   * Byrjar niðurteljara með this.count() og keyrir á 1000ms fresti\r\n   * með window.setInterval og setur id á teljara í this.interval\r\n   */\r\n  startCounter() {\r\n    this.count();\r\n    if (this.date - new Date() > 0) {\r\n      this.interval = setInterval(() => { this.count(); }, 1000);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stöðvar teljara með window.clearInterval á this.interval\r\n   */\r\n  stopCounter() {\r\n    window.clearInterval(this.interval);\r\n  }\r\n\r\n  /**\r\n   * Býr til element sem heldur utan um teljara, á forminu:\r\n   * <div class=\"countdown__box\">\r\n   *   <span class=\"countdown__num\">num</span>\r\n   *   <span class=\"countdown__title\">title</span>\r\n   * </div>\r\n   * og skilar element\r\n   */\r\n  createElement(num, title) {\r\n    const div = document.createElement('div');\r\n    div.setAttribute('class', 'countdown__box');\r\n\r\n    const numSpan = document.createElement('span');\r\n    numSpan.setAttribute('class', 'countdown__num');\r\n    numSpan.appendChild(document.createTextNode(num));\r\n\r\n    const titleSpan = document.createElement('span');\r\n    titleSpan.setAttribute('class', 'countdown__title');\r\n    titleSpan.appendChild(document.createTextNode(title));\r\n\r\n    div.appendChild(numSpan);\r\n    div.appendChild(titleSpan);\r\n\r\n    return div;\r\n  }\r\n\r\n  /**\r\n   * Eyðir niðurteljara með því að fjarlægja úr localStorage og\r\n   * fjarlægja allt úr this.container.\r\n   * Kallar líka í this.stopCounter() og this.showForm()\r\n   */\r\n  delete() {\r\n    window.localStorage.removeItem(this.keyName);\r\n    while (this.container.firstChild) {\r\n      this.container.removeChild(this.container.firstChild);\r\n    }\r\n    this.stopCounter();\r\n    this.showForm();\r\n  }\r\n\r\n  /**\r\n   * Tekur við remaining sem eru millisekúndur í dagsetningu sem talið er\r\n   * niður í.\r\n   * Útbýr og skilar element sem inniheldur element fyrir daga, klukkustundir,\r\n   * mínútur og sekúndur þar til remaining gerist. Hver „partur“ er búinn til\r\n   * með kalli í this.createElement\r\n   */\r\n  countdown(remaining) {\r\n    const totalSecs = Math.ceil(remaining / 1000);\r\n\r\n    const totalMin = Math.floor(totalSecs / 60);\r\n\r\n    const totalHrs = Math.floor(totalSecs / (60 * 60));\r\n\r\n    const days = Math.floor(totalSecs / (60 * 60 * 24));\r\n\r\n    const div = document.createElement('div');\r\n    div.setAttribute('class', 'countdown__container');\r\n\r\n    div.appendChild(this.createElement(days, 'Dagar'));\r\n    div.appendChild(this.createElement(totalHrs % 24, 'Klst'));\r\n    div.appendChild(this.createElement(totalMin % 60, 'Mín'));\r\n    div.appendChild(this.createElement(totalSecs % 60, 'Sek'));\r\n\r\n    return div;\r\n  }\r\n\r\n  /**\r\n   * Telur niður.\r\n   * Fjarlægir allt úr this.element (ef eitthvað er þar) og athugar síðan hvort\r\n   * this.date (dagsetning sem talið er niður að) sé liðin og ef svo er birtir\r\n   * textann \"Komið!\" og stoppa teljara með this.stopCounter()\r\n   * Ef ekki liðið uppfærir teljara með því að bæta element úr this.countdown()\r\n   * við this.element\r\n   */\r\n  count() {\r\n    if (this.element.firstChild) {\r\n      this.element.removeChild(this.element.firstChild);\r\n    }\r\n    if (this.date - new Date() <= 0) {\r\n      const done = document.createElement('h3');\r\n      done.setAttribute('class', 'countdown__heading');\r\n      done.appendChild(document.createTextNode('Komið!'));\r\n      this.element.appendChild(done);\r\n      this.stopCounter();\r\n    } else {\r\n      const newCountdown = this.countdown(this.date - new Date());\r\n      this.element.appendChild(newCountdown);\r\n    }\r\n  }\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const countdown = new Countdown();\r\n  countdown.load();\r\n});\r\n"]}