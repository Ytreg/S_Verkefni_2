{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"script-compiled.js","sourcesContent":["class Videos {\r\n  load() {\r\n    $.getJSON('videos.json', (json) => {\r\n      this.json = json;\r\n      this.done();\r\n    });\r\n  }\r\n\r\n  createCategoryElements() {\r\n    for (let i = 0; i < this.json.categories.length; i += 1) {\r\n      $('main')\r\n        .append($(`<section id=\"${this.json.categories[i].id}\">`)\r\n          .append($('<div class=\"row\">')\r\n            .append($('<div class=\"col col-12\">')\r\n              .append($('<h1 class=\"heading heading--category\">')\r\n                .text(this.json.categories[i].title))))\r\n          .append(this.createPosterElements(i)))\r\n        .append('<hr>');\r\n    }\r\n  }\r\n\r\n  done() {\r\n    this.createCategoryElements();\r\n  }\r\n\r\n  createPosterElements(id) {\r\n    const container = $('<div class=\"row\">');\r\n    const c = this.json.categories[id].videos;\r\n\r\n    for (let i = 0; i < this.json.categories[id].videos.length; i += 1) {\r\n      container.append(this.createPosterElement(this.json.videos[c[i] - 1]));\r\n    }\r\n    return container;\r\n  }\r\n\r\n  createPosterElement(video) {\r\n    const container = $('<figure class=\"col col-4 col-sm-6 col-sm-sm-12\">');\r\n\r\n    const thumbnail = $(`<a href=\"video.html?id=${video.id}\">`);\r\n\r\n    const img = $(`<img src=\"${video.poster}\">`);\r\n\r\n    const span = $('<span>');\r\n\r\n    // Sýna lengdina á myndbandi\r\n    let d = video.duration;\r\n    const sec = d % 60 < 10 ? `0${d % 60}` : d % 60;\r\n    d = `${Math.floor(d / 60)}:${sec}`;\r\n\r\n    span.text(d);\r\n    thumbnail.append(img).append(span);\r\n\r\n    const caption = $('<figcaption>').text(video.title);\r\n\r\n    const p = $('<p>');\r\n\r\n    const now = new Date();\r\n    const created = new Date(video.created);\r\n    const millisec = now.getTime() - created.getTime();\r\n\r\n    const totalSecs = Math.ceil(millisec / 1000);\r\n\r\n    const totalMin = Math.floor(totalSecs / 60);\r\n\r\n    const totalHrs = Math.floor(totalSecs / (60 * 60));\r\n\r\n    // Fá fylki sem inniheldur réttan árs-, mánaðar- og dagsmun\r\n    const dmy = this.diffDate(now, created);\r\n    let duration;\r\n\r\n    if (dmy.years > 0) {\r\n      duration = `Fyrir ${dmy.years} ${dmy.years === 1 ? 'ári' : 'árum'} síðan`;\r\n    } else if (dmy.months > 0) {\r\n      duration = `Fyrir ${dmy.months} ${dmy.months === 1 ? 'mánuði' : 'mánuðum'} síðan`;\r\n    } else if (dmy.days > 0) {\r\n      if (dmy.days >= 7) {\r\n        const weeks = Math.floor(dmy.days / 7);\r\n        duration = `Fyrir ${weeks} ${weeks === 1 ? 'viku' : 'vikum'} síðan`;\r\n      } else {\r\n        duration = `Fyrir ${dmy.days} ${dmy.days === 1 ? 'degi' : 'dögum'} síðan`;\r\n      }\r\n    } else if (totalHrs > 0) {\r\n      duration = `Fyrir ${totalHrs} ${totalHrs === 1 ? 'klukkutíma' : 'klukkutímum'} síðan`;\r\n    } else if (totalMin > 0) {\r\n      duration = `Fyrir ${totalMin} ${totalMin === 1 ? 'mínútu' : 'mínútum'} síðan`;\r\n    } else {\r\n      duration = `Fyrir ${totalSecs} ${totalSecs === 1 ? 'sekúndu' : 'sekúndum'} síðan`;\r\n    }\r\n\r\n    p.text(duration);\r\n\r\n    container.append(thumbnail);\r\n    container.append(caption);\r\n    container.append(p);\r\n\r\n    return container;\r\n  }\r\n\r\n  diffDate(date1, date2) {\r\n    let d1 = date1;\r\n    let d2 = date2;\r\n    const arr = { years: 0, months: 0, days: 0 };\r\n\r\n    if (d1 > d2) {\r\n      const tmp = d1;\r\n      d1 = d2;\r\n      d2 = tmp;\r\n    }\r\n\r\n    const years1 = d1.getFullYear();\r\n    const years2 = d2.getFullYear();\r\n\r\n    const months1 = d1.getMonth();\r\n    const months2 = d2.getMonth();\r\n\r\n    const days1 = d1.getDate();\r\n    const days2 = d2.getDate();\r\n\r\n    arr.years = years2 - years1;\r\n    arr.months = months2 - months1;\r\n    arr.days = days2 - days1;\r\n\r\n    if (arr.days < 0) {\r\n      const tmpDate = new Date(d1.getFullYear(), d1.getMonth() + 1, 1, 0, 0, -1);\r\n\r\n      const numDays = tmpDate.getDate();\r\n\r\n      arr.months -= 1;\r\n      arr.days += numDays;\r\n    }\r\n\r\n    if (arr.months < 0) {\r\n      arr.months += 12;\r\n      arr.years -= 1;\r\n    }\r\n\r\n    return arr;\r\n  }\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const videos = new Videos();\r\n  videos.load();\r\n});\r\n"]}