{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"script-compiled.js","sourcesContent":["/**\r\n * Niðurteljari!\r\n */\r\nclass Video {\r\n  /**\r\n   * Finnur container fyrir niðurteljara og form.\r\n   * Bindur submit eventhandler við form.\r\n   */\r\n  constructor() {\r\n    /*\r\n    this.keyName = 'countdown';\r\n    this.container = document.querySelector('.countdown');\r\n    this.form = document.querySelector('form');\r\n\r\n    // til þess að submit hafi þennan klasa sem \"this\" verðum við\r\n    // að nota bind hér (og í öðrum föllum sem við bindum!)\r\n    this.form.addEventListener('submit', this.submit.bind(this));\r\n    */\r\n  }\r\n\r\n  /**\r\n   * Sækir gögn úr localStorage eftir this.keyName\r\n   * Ef gögn eru til, hleður þeim inn með því að kalla í this.create()\r\n   */\r\n  load() {\r\n    /*\r\n    const saved = window.localStorage.getItem(this.keyName);\r\n\r\n    if (saved) {\r\n      const parsed = JSON.parse(saved);\r\n      this.create(parsed.title, new Date(parsed.date));\r\n    }\r\n    */\r\n\r\n    $.getJSON(\"videos.json\", json => {\r\n      this.json = json;\r\n      console.log(this.json);\r\n      this.done();\r\n    });\r\n  }\r\n\r\n  createCategoryElements() {\r\n    for (var i = 0; i < this.json.categories.length; i++) {\r\n      $('main')\r\n        .append($(`<section id=\"${this.json.categories[i].id}\">`)\r\n          .append($(`<div class=\"row\">`)\r\n            .append($('<div class=\"col col-12\">')\r\n              .append($('<h1 class=\"heading heading--category\">')\r\n                .text(this.json.categories[i].title))))\r\n          .append(this.createPosterElements(i)))\r\n        .append('<hr>');\r\n    }\r\n  }\r\n\r\n  done() {\r\n    this.createCategoryElements();\r\n  }\r\n\r\n  createPosterElements(id) {\r\n    const container = $('<div class=\"row\">');\r\n    const c = this.json.categories[id].videos;\r\n\r\n    for (var i = 0; i < this.json.categories[id].videos.length; i++) {\r\n      container.append(this.createPosterElement(this.json.videos[c[i] - 1]));\r\n    }\r\n    return container;\r\n  }\r\n\r\n  createPosterElement(video) {\r\n    const container = document.createElement('figure');\r\n    container.setAttribute('class', 'col');\r\n    container.classList.add('col-4');\r\n    container.classList.add('col-sm-6');\r\n    container.classList.add('col-sm-sm-12');\r\n\r\n    const thumbnail = document.createElement('a');\r\n    thumbnail.setAttribute('href', `/video.html?id=${video.id}`);\r\n\r\n    const img = document.createElement('img');\r\n    img.src = video.poster;\r\n\r\n    const duration = document.createElement('span');\r\n\r\n    // Sýna lengdina á myndbandi\r\n    let d = video.duration;\r\n    d = `${Math.floor(d/60)}:${d%60 < 10 ? \"0\"+d%60 : d%60}`;\r\n\r\n    duration.appendChild(document.createTextNode(d));\r\n    thumbnail.appendChild(img);\r\n    thumbnail.appendChild(duration);\r\n\r\n    const caption = document.createElement('figcaption');\r\n    caption.appendChild(document.createTextNode(video.title));\r\n\r\n    const p = document.createElement('p');\r\n    const now = new Date();\r\n    let time = new Date(video.created);\r\n    time = now.getTime() - time.getTime();\r\n    let time1 = new Date(video.created);\r\n\r\n    const totalSecs = Math.ceil(time / 1000);\r\n\r\n    const totalMin = Math.floor(totalSecs / 60);\r\n\r\n    const totalHrs = Math.floor(totalSecs / (60 * 60));\r\n\r\n    // Fá fylki sem inniheldur árs-, mánaðar- og dagsmun\r\n    const dmy = this.diffDate(now, time1);\r\n\r\n    if (dmy.years > 0) time = `Fyrir ${dmy.years} árum síðan`;\r\n    else if (dmy.months > 0) time = `Fyrir ${dmy.months} mánuðum síðan`;\r\n    else if (dmy.days > 0) {\r\n      if (dmy.days >= 7) {\r\n        time = `Fyrir ${Math.floor(dmy.days / 7)} vikum síðan`;\r\n      } else {\r\n        time = `Fyrir ${dmy.days} dögum síðan`;\r\n      }\r\n    }\r\n    else if (totalHrs > 0) time = `Fyrir ${totalHrs} klukkutímum síðan`;\r\n    else if (totalMin > 0) time = `Fyrir ${totalMin} mínútum síðan`;\r\n    else time = `Fyrir ${totalSecs} sekúndum síðan`;\r\n\r\n    p.appendChild(document.createTextNode(time));\r\n\r\n    container.appendChild(thumbnail);\r\n    container.appendChild(caption);\r\n    container.appendChild(p);\r\n\r\n    return container;\r\n  }\r\n\r\n\r\n\r\n  diffDate(date1, date2) {\r\n    const arr = { years: 0, months: 0, days: 0 };\r\n\r\n    if (date1 > date2) {\r\n      const tmp = date1;\r\n      date1 = date2;\r\n      date2 = tmp;\r\n    }\r\n\r\n    const years1 = date1.getFullYear();\r\n    const years2 = date2.getFullYear();\r\n\r\n    const months1 = date1.getMonth();\r\n    const months2 = date2.getMonth();\r\n\r\n    const days1 = date1.getDate();\r\n    const days2 = date2.getDate();\r\n\r\n    arr.years = years2 - years1;\r\n    arr.months = months2 - months1;\r\n    arr.days = days2 - days1;\r\n\r\n    if (arr.days < 0) {\r\n      const tmpDate = new Date(date1.getFullYear(), date1.getMonth() + 1, 1, 0, 0, -1);\r\n\r\n      const numDays = tmpDate.getDate();\r\n\r\n      arr.months--;\r\n      arr.days += numDays;\r\n    }\r\n\r\n    if (arr.months < 0) {\r\n      arr.months += 12;\r\n      arr.years--;\r\n    }\r\n\r\n    return arr;\r\n  }\r\n  /**\r\n   * Tekur við title sem streng og date sem Date hlut\r\n   * Vistar sem json gögn í localStorage undir this.keyName\r\n   */\r\n   /*\r\n  save(title, date) {\r\n    const data = { title, date };\r\n    const json = JSON.stringify(data);\r\n    window.localStorage.setItem(this.keyName, json);\r\n  }\r\n*/\r\n\r\n  /**\r\n   * Tekur við:\r\n   *  - date sem streng á forminu \"yyyy-mm-dd\", t.d. \"2017-11-06\"\r\n   *  - time sem streng á forminu \"hh:mm\", t.d. \"09:00\"\r\n   * Skilar date hlut með gögnum úr date og time\r\n   */\r\n   /*\r\n  parseDate(date, time) {\r\n    return new Date(`${date} ${time}`);\r\n  }\r\n  */\r\n\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const video = new Video();\r\n  video.load();\r\n\r\n});\r\n"]}