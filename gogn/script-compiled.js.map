{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"script-compiled.js","sourcesContent":["/**\n * Niðurteljari!\n */\nclass Countdown {\n  /**\n   * Finnur container fyrir niðurteljara og form.\n   * Bindur submit eventhandler við form.\n   */\n  constructor() {\n    this.keyName = 'countdown';\n    this.container = document.querySelector('.countdown');\n    this.form = document.querySelector('form');\n\n    // til þess að submit hafi þennan klasa sem \"this\" verðum við\n    // að nota bind hér (og í öðrum föllum sem við bindum!)\n    this.form.addEventListener('submit', this.submit.bind(this));\n  }\n\n  /**\n   * Sækir gögn úr localStorage eftir this.keyName\n   * Ef gögn eru til, hleður þeim inn með því að kalla í this.create()\n   */\n  load() {\n    const saved = window.localStorage.getItem(this.keyName);\n\n    if (saved) {\n      const parsed = JSON.parse(saved);\n      this.create(parsed.title, new Date(parsed.date));\n    }\n  }\n\n  /**\n   * Tekur við title sem streng og date sem Date hlut\n   * Vistar sem json gögn í localStorage undir this.keyName\n   */\n  save(title, date) {\n    const data = { title, date };\n    const json = JSON.stringify(data);\n    window.localStorage.setItem(this.keyName, json);\n  }\n\n  /**\n   * Handler fyrir submit á formi.\n   * Sækir gögn úr formi og kallar í this.parseDate()\n   * Vistar gögn með this.save() og sýnir niðurteljara með this.create()\n   */\n  submit(e) {\n    e.preventDefault();\n\n    const title = this.form.querySelector('input[type=text]');\n    const date = this.form.querySelector('input[type=date]');\n    const time = this.form.querySelector('input[type=time]');\n\n    const parsedDate = this.parseDate(date.value, time.value);\n    this.save(title.value, parsedDate);\n    this.create(title.value, parsedDate);\n  }\n\n  /**\n   * Tekur við:\n   *  - date sem streng á forminu \"yyyy-mm-dd\", t.d. \"2017-11-06\"\n   *  - time sem streng á forminu \"hh:mm\", t.d. \"09:00\"\n   * Skilar date hlut með gögnum úr date og time\n   */\n  parseDate(date, time) {\n    return new Date(`${date} ${time}`);\n  }\n\n  /**\n   * Býr til element fyrir niðurteljara og bætir við this.container\n   * Setur this.date sem dagsetningu sem talið er niður að\n   * Setur this.element sem element sem geymir niðurteljara\n   * Bætir við \"eyða\" takka sem sér um að eyða niðurteljara með this.delete\n   * Byrjar niðurteljara með this.startCounter() og\n   * felur form með this.hideForm()\n   */\n  create(title, date) {\n    const titleElement = document.createElement('h2');\n    titleElement.setAttribute('class', 'countdown__heading');\n    titleElement.appendChild(document.createTextNode(title));\n\n    this.container.appendChild(titleElement);\n\n    this.element = document.createElement('div');\n\n    const countdownContainer = document.createElement('div');\n    countdownContainer.setAttribute('class', 'countdown__container');\n\n    this.element.appendChild(countdownContainer);\n\n    this.container.appendChild(this.element);\n\n    this.date = new Date(date);\n    const deleteButton = document.createElement('button');\n    deleteButton.setAttribute('class', 'button');\n    deleteButton.appendChild(document.createTextNode('Eyða'));\n\n    this.container.appendChild(deleteButton);\n\n    deleteButton.addEventListener('click', this.delete.bind(this));\n\n    this.startCounter();\n\n    this.hideForm();\n  }\n\n  /**\n   * Felur form með CSS\n   */\n  hideForm() {\n    this.form.style.display = 'none';\n  }\n\n  /**\n   * Sýnir form með CSS\n   */\n  showForm() {\n    this.form.style.display = 'block';\n  }\n\n  /**\n   * Byrjar niðurteljara með this.count() og keyrir á 1000ms fresti\n   * með window.setInterval og setur id á teljara í this.interval\n   */\n  startCounter() {\n    this.count();\n    if (this.date - new Date() > 0) {\n      this.interval = setInterval(() => { this.count(); }, 1000);\n    }\n  }\n\n  /**\n   * Stöðvar teljara með window.clearInterval á this.interval\n   */\n  stopCounter() {\n    window.clearInterval(this.interval);\n  }\n\n  /**\n   * Býr til element sem heldur utan um teljara, á forminu:\n   * <div class=\"countdown__box\">\n   *   <span class=\"countdown__num\">num</span>\n   *   <span class=\"countdown__title\">title</span>\n   * </div>\n   * og skilar element\n   */\n  createElement(num, title) {\n    const div = document.createElement('div');\n    div.setAttribute('class', 'countdown__box');\n\n    const numSpan = document.createElement('span');\n    numSpan.setAttribute('class', 'countdown__num');\n    numSpan.appendChild(document.createTextNode(num));\n\n    const titleSpan = document.createElement('span');\n    titleSpan.setAttribute('class', 'countdown__title');\n    titleSpan.appendChild(document.createTextNode(title));\n\n    div.appendChild(numSpan);\n    div.appendChild(titleSpan);\n\n    return div;\n  }\n\n  /**\n   * Eyðir niðurteljara með því að fjarlægja úr localStorage og\n   * fjarlægja allt úr this.container.\n   * Kallar líka í this.stopCounter() og this.showForm()\n   */\n  delete() {\n    window.localStorage.removeItem(this.keyName);\n    while (this.container.firstChild) {\n      this.container.removeChild(this.container.firstChild);\n    }\n    this.stopCounter();\n    this.showForm();\n  }\n\n  /**\n   * Tekur við remaining sem eru millisekúndur í dagsetningu sem talið er\n   * niður í.\n   * Útbýr og skilar element sem inniheldur element fyrir daga, klukkustundir,\n   * mínútur og sekúndur þar til remaining gerist. Hver „partur“ er búinn til\n   * með kalli í this.createElement\n   */\n  countdown(remaining) {\n    const totalSecs = Math.ceil(remaining / 1000);\n\n    const totalMin = Math.floor(totalSecs / 60);\n\n    const totalHrs = Math.floor(totalSecs / (60 * 60));\n\n    const days = Math.floor(totalSecs / (60 * 60 * 24));\n\n    const div = document.createElement('div');\n    div.setAttribute('class', 'countdown__container');\n\n    div.appendChild(this.createElement(days, 'Dagar'));\n    div.appendChild(this.createElement(totalHrs % 24, 'Klst'));\n    div.appendChild(this.createElement(totalMin % 60, 'Mín'));\n    div.appendChild(this.createElement(totalSecs % 60, 'Sek'));\n\n    return div;\n  }\n\n  /**\n   * Telur niður.\n   * Fjarlægir allt úr this.element (ef eitthvað er þar) og athugar síðan hvort\n   * this.date (dagsetning sem talið er niður að) sé liðin og ef svo er birtir\n   * textann \"Komið!\" og stoppa teljara með this.stopCounter()\n   * Ef ekki liðið uppfærir teljara með því að bæta element úr this.countdown()\n   * við this.element\n   */\n  count() {\n    if (this.element.firstChild) {\n      this.element.removeChild(this.element.firstChild);\n    }\n    if (this.date - new Date() <= 0) {\n      const done = document.createElement('h3');\n      done.setAttribute('class', 'countdown__heading');\n      done.appendChild(document.createTextNode('Komið!'));\n      this.element.appendChild(done);\n      this.stopCounter();\n    } else {\n      const newCountdown = this.countdown(this.date - new Date());\n      this.element.appendChild(newCountdown);\n    }\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const countdown = new Countdown();\n  countdown.load();\n});\n"]}